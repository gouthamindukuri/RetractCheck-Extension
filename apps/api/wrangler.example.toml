name = "retractcheck-worker"
main = "src/index.ts"
compatibility_date = "2024-12-15"
compatibility_flags = ["nodejs_compat"]

[vars]
API_VERSION = "v1"

[[kv_namespaces]]
binding = "RETRACTCHECK_CACHE"
id = "<your-kv-namespace-id>"

[[d1_databases]]
binding = "RETRACTCHECK_DB"
database_name = "<your-d1-database-name>"
database_id = "<your-d1-database-id>"

[triggers]
crons = ["0 2 * * *"]

# Custom domain (optional - configure in Cloudflare dashboard under Workers > Settings > Domains & Routes)
# routes = [
#   { pattern = "api.yourdomain.com/*", zone_name = "yourdomain.com" }
# ]

# Secrets (set via `wrangler secret put <NAME>`):
#   INGEST_TOKEN           - Bearer token for POST /v1/ingest
#   HEALTHCHECK_PING_URL   - Healthchecks.io ping URL (optional)
#   RETRACTCHECK_SOURCE_URL - Override CSV source URL (optional)
#   RATE_LIMIT_CONFIG      - JSON rate limit config (optional)
#   TELEGRAM_BOT_TOKEN     - Telegram bot token for notifications (optional)
#   TELEGRAM_CHAT_ID       - Telegram chat ID for notifications (optional)
